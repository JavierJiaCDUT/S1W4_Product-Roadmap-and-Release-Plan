<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬å››å‘¨è¯¾ç¨‹ï¼šæ•æ·é¡¹ç›®è·¯çº¿å›¾ä¸å‘å¸ƒè®¡åˆ’</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: The application is structured into five thematic, navigable sections corresponding to the lecture's main topics: Core Philosophy, Product Roadmap, Release Plan, Agile Estimation, and PMBOK Connection. This tab-based structure allows users non-linear access to content, empowering them to explore topics based on interest rather than following a rigid, linear path. This design choice transforms the static lecture plan into an interactive learning module, enhancing usability and engagement by breaking down the content into digestible, self-contained chunks. -->
    <!-- Visualization & Content Choices: 
        1.  Report Info: Agile vs. Traditional Planning -> Goal: Compare -> Viz: Side-by-side HTML/CSS table -> Interaction: Static -> Justification: Provides a clear, direct comparison of core tenets. -> Library/Method: HTML/Tailwind.
        2.  Report Info: Roadmap & Release Plan Hierarchy -> Goal: Organize/Show Relationship -> Viz: Interactive hierarchical diagram -> Interaction: Clicking a level (Vision, Roadmap, Release) highlights it and displays its details in an adjacent panel. -> Justification: Makes the abstract strategic-to-tactical flow tangible and explorable. -> Library/Method: HTML/Tailwind, JS for interaction.
        3.  Report Info: Story Points & Velocity -> Goal: Demonstrate Change & Process -> Viz: Interactive bar chart for Velocity & a Planning Poker simulation -> Interaction: A button updates the velocity chart to simulate sprint completion. Users click cards to participate in a mock estimation vote. -> Justification: Active participation solidifies understanding of these dynamic concepts far better than static text. -> Library/Method: Chart.js, HTML/Tailwind, JS.
        4.  Report Info: User Story Generation from Vision -> Goal: Apply knowledge -> Viz: Text area for input, button for action, and a text block for output -> Interaction: User enters a vision and clicks a button to generate user stories and story point estimates using the Gemini API. -> Justification: Provides a practical, hands-on tool to connect product vision with tangible, actionable user stories, directly reinforcing a key learning objective of the lecture plan. -> Library/Method: HTML/Tailwind, JS, Gemini API.
        5.  Report Info: Release Plan Generation from Goal -> Goal: Apply knowledge -> Viz: Text area for input, button for action, and a text block for output -> Interaction: User enters a release goal and clicks a button to generate a draft release plan using the Gemini API. -> Justification: Creates a tangible link between a high-level goal and tactical planning, reinforcing the lecture's content on release planning. -> Library/Method: HTML/Tailwind, JS, Gemini API.
        6.  Report Info: PMBOK & Agile Relationship Explanation -> Goal: Explain/Synthesize -> Viz: Button and a collapsible text block -> Interaction: User clicks a button to reveal a detailed, AI-generated explanation of the relationship between Agile and PMBOK planning concepts. -> Justification: Offers a dynamic way to dive deeper into a key theoretical connection, providing richer context than static text alone. -> Library/Method: HTML/Tailwind, JS, Gemini API.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #fdfcf9;
            color: #334155;
        }
        .nav-button {
            transition: all 0.3s ease;
            border-bottom: 4px solid transparent;
        }
        .nav-button.active {
            color: #0d9488;
            border-bottom-color: #0d9488;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .diagram-item {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .diagram-item.selected {
            background-color: #ccfbf1;
            transform: scale(1.05);
            box-shadow: 0 4px 14px 0 rgba(13, 148, 136, 0.2);
        }
        .poker-card {
            transition: all 0.2s ease-in-out;
        }
        .poker-card:hover {
            transform: translateY(-10px) scale(1.05);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 320px;
            max-height: 400px;
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto px-4 py-8 md:py-12">
        <header class="text-center mb-10">
            <h1 class="text-3xl md:text-4xl font-bold text-teal-700">Product Planning: Agile Project Roadmap and Release Plan</h1>
            <p class="mt-2 text-lg text-slate-500">ç¬¬å››å‘¨è¯¾ç¨‹äº¤äº’å¼å­¦ä¹ æŒ‡å—</p>
        </header>

        <nav class="flex flex-wrap justify-center border-b-2 border-slate-200 mb-8">
            <button data-target="intro" class="nav-button active text-sm md:text-base font-medium px-4 py-3 md:px-6 md:py-4">1. Core Concepts</button>
            <button data-target="roadmap" class="nav-button text-sm md:text-base font-medium px-4 py-3 md:px-6 md:py-4">2. Product Roadmap</button>
            <button data-target="release" class="nav-button text-sm md:text-base font-medium px-4 py-3 md:px-6 md:py-4">3. Release Plan</button>
            <button data-target="estimation" class="nav-button text-sm md:text-base font-medium px-4 py-3 md:px-6 md:py-4">4. Agile Estimation</button>
            <button data-target="pmbok" class="nav-button text-sm md:text-base font-medium px-4 py-3 md:px-6 md:py-4">5.PMBOK</button>
        </nav>

        <main>
            <section id="intro" class="content-section active">
                <div class="bg-white p-6 md:p-8 rounded-xl shadow-sm">
                    <h2 class="text-2xl font-bold text-teal-600 mb-4">The bridge from 'vision' to 'action'</h2>
                    <p class="mb-6 text-slate-600">In the past few weeks, we started with innovative ideas and used user stories and user story maps to refine and structure vague requirements and establish a product vision. Now we have a vision and a list of prioritised requirements, but how do we turn them into an executable, rhythmic development plan? This is where agile project planning comes in. Its goal is to provide direction in the face of uncertainty and allow for adjustments as we learn.</p>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="border-2 border-rose-200 rounded-lg p-4 bg-rose-50/50">
                            <h3 class="text-xl font-semibold text-rose-800 mb-3">âš™ï¸ Traditional Planning</h3>
                            <ul class="list-disc list-inside space-y-2 text-slate-700">
                                <li>Emphasizes <strong>detail</strong> and <strong>fixed</strong></li>
                                <li>Complete plans are established at the project's outset</li>
                                <li>Changes are seen as risks and need strict control</li>
                                <li>Goal is to <strong>follow the plan</strong></li>
                            </ul>
                        </div>
                        <div class="border-2 border-sky-200 rounded-lg p-4 bg-sky-50/50">
                            <h3 class="text-xl font-semibold text-sky-800 mb-3">ğŸ”„ Agile Planning</h3>
                            <ul class="list-disc list-inside space-y-2 text-slate-700">
                                <li>Emphasizes <strong>flexibility</strong> and <strong>response to change</strong></li>
                                <li>Planning is a continuous, iterative activity</li>
                                <li>Embrace change, treat it as a learning opportunity</li>
                                <li>Goal is to <strong>deliver value</strong></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <section id="roadmap" class="content-section">
                <div class="bg-white p-6 md:p-8 rounded-xl shadow-sm">
                    <h2 class="text-2xl font-bold text-teal-600 mb-2">Product Roadmap</h2>
                    <p class="mb-6 text-slate-600">The product roadmap is a high-level view of the product's evolution over time, which communicates the product's future direction, key milestones, and delivered value. It is not a detailed plan in the form of a Gantt chart, but a strategic document that answers "Where do we want to go in the future?" Please click on the different levels of the diagram below to view their constituent elements.</p>
                    <div class="flex flex-col md:flex-row justify-center items-center">
                        <div class="lg:w-1/2">
                            <div class="space-y-4 text-center">
                                <div id="diagram-vision" class="diagram-item p-4 border-2 border-amber-300 rounded-lg bg-amber-50">
                                    <h3 class="text-xl font-bold text-amber-800">Vision</h3>
                                    <p class="text-sm text-amber-700">Core driver</p>
                                </div>
                                <div class="text-2xl text-slate-400">â–¼</div>
                                <div id="diagram-roadmap" class="diagram-item p-4 border-2 border-sky-300 rounded-lg bg-sky-50">
                                    <h3 class="text-xl font-bold text-sky-800">Roadmap</h3>
                                    <p class="text-sm text-sky-700">Strategic direction</p>
                                </div>
                                <div class="text-2xl text-slate-400">â–¼</div>
                                <div id="diagram-release" class="diagram-item p-4 border-2 border-emerald-300 rounded-lg bg-emerald-50">
                                    <h3 class="text-xl font-bold text-emerald-800">Release Plan</h3>
                                     <p class="text-sm text-emerald-700">Tactical execution</p>
                                </div>
                            </div>
                        </div>
                        <div class="lg:w-1/2 mt-8 lg:mt-0">
                            <div id="diagram-details" class="p-6 bg-slate-50 rounded-lg h-full">
                                <h3 id="details-title" class="text-xl font-bold text-slate-700 mb-4">Please select a level</h3>
                                <div id="details-content" class="text-slate-600 space-y-2">
                                    <p>Click on "Vision," "Product Roadmap," or "Release Plan" on the left to view the details.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="release" class="content-section">
                 <div class="bg-white p-6 md:p-8 rounded-xl shadow-sm">
                    <h2 class="text-2xl font-bold text-teal-600 mb-2">Release Plan</h2>
                    <p class="mb-6 text-slate-600">The release plan is the next layer of the product roadmap, which more specifically details which features will be delivered in a specific release version and when. It transforms the high-level roadmap themes into executable feature sets, serving as the critical bridge connecting strategy and tactics.</p>
                    <div class="bg-slate-50 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-slate-700 mb-4">Typical Elements of a Release Plan</h3>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-semibold text-slate-800">ğŸ¯ Release Goal</h4>
                                <p class="text-sm text-slate-600">The core purpose of this release, such as "launching an MVP version to validate core value."</p>
                            </div>
                            <div>
                                <h4 class="font-semibold text-slate-800">ğŸ“¦ Release Scope (Release Scope)</h4>
                                <p class="text-sm text-slate-600">The set of key features to be delivered in this release, typically from the product backlog's high-priority items.</p>
                            </div>
                            <div>
                                <h4 class="font-semibold text-slate-800">ğŸ—“ï¸ Release Date</h4>
                                <p class="text-sm text-slate-600">The expected delivery time window, such as "end of Q3."</p>
                            </div>
                            <div>
                                <h4 class="font-semibold text-slate-800">ğŸ”— Dependencies & Risks</h4>
                                <p class="text-sm text-slate-600">The potential internal and external dependencies that may impact the release, along with the associated risks and mitigation strategies.</p>
                            </div>
                        </div>
                        <div class="mt-6 pt-4 border-t border-slate-200">
                            <h4 class="font-semibold text-slate-800">Methodology</h4>
                            <p class="text-sm text-slate-600">Select high-value features from the product backlog, plan them in collaboration with the development team, and commit to their delivery. Agile recommends small, frequent releases to quickly gather market feedback.</p>
                        </div>
                    </div>
                    <div class="bg-teal-50 p-6 md:p-8 rounded-xl shadow-sm mt-8">
                        <h2 class="text-2xl font-bold text-teal-700 mb-4">âœ¨ Release Plan Helper</h2>
                        <p class="mb-4 text-slate-600">Input a release goal, and let AI help you generate a preliminary release plan outline.</p>
                        <textarea id="release-goal-input" class="w-full h-16 p-3 rounded-lg border border-slate-300 focus:outline-none focus:ring-2 focus:ring-teal-500 mb-4" placeholder="ä¾‹å¦‚ï¼šå‘å¸ƒä¸€æ¬¾é¢å‘ç§»åŠ¨ç«¯ç”¨æˆ·çš„MVPï¼Œæ ¸å¿ƒåŠŸèƒ½æ˜¯å¿«é€Ÿåˆ†äº«ç…§ç‰‡ã€‚"></textarea>
                        <button id="generate-release-btn" class="w-full bg-teal-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-teal-700 transition-colors flex items-center justify-center">
                            <span id="generate-release-text">ç”Ÿæˆå‘å¸ƒè®¡åˆ’ âœ¨</span>
                            <span id="generate-release-spinner" class="hidden animate-spin h-5 w-5 border-4 border-white border-t-transparent rounded-full ml-2"></span>
                        </button>
                        <div id="generated-release-output" class="bg-white p-4 mt-6 rounded-lg border border-slate-200 space-y-4">
                            <p id="release-output-placeholder" class="text-slate-400 italic text-center">ç”Ÿæˆçš„å‘å¸ƒè®¡åˆ’å¤§çº²å°†åœ¨æ­¤å¤„æ˜¾ç¤º...</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="estimation" class="content-section">
                <div class="bg-white p-6 md:p-8 rounded-xl shadow-sm">
                    <h2 class="text-2xl font-bold text-teal-600 mb-2">æ•æ·ä¼°ç®—ï¼šæ•…äº‹ç‚¹ä¸å›¢é˜Ÿé€Ÿåº¦</h2>
                    <p class="mb-6 text-slate-600">æ•æ·ä¼°ç®—ä¸è¿½æ±‚ç²¾ç¡®çš„å°æ—¶æ•°ï¼Œè€Œæ˜¯é€šè¿‡ç›¸å¯¹ä¼°ç®—æ¥ç†è§£å·¥ä½œé‡ã€‚æ•…äº‹ç‚¹æ˜¯ä¸€ä¸ªæŠ½è±¡å•ä½ï¼Œä»£è¡¨å·¥ä½œçš„å¤æ‚åº¦ã€å·¥ä½œé‡å’Œä¸ç¡®å®šæ€§ã€‚å›¢é˜Ÿåœ¨ä¸€ä¸ªè¿­ä»£ä¸­å®Œæˆçš„æ•…äº‹ç‚¹æ€»å’Œï¼Œå³ä¸ºâ€œé€Ÿåº¦â€ã€‚</p>
                    <div class="grid lg:grid-cols-2 gap-8">
                        <div>
                            <h3 class="text-xl font-semibold text-slate-700 mb-4 text-center">å›¢é˜Ÿé€Ÿåº¦ (Velocity) è¿½è¸ª</h3>
                            <p class="text-sm text-slate-500 mb-4 text-center">é€Ÿåº¦ç”¨äºé¢„æµ‹æœªæ¥ï¼Œè€Œéç»©æ•ˆè€ƒæ ¸ã€‚å®ƒä¼šè‡ªç„¶æ³¢åŠ¨ã€‚ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®æ¨¡æ‹Ÿå®Œæˆä¸€æ¬¡è¿­ä»£ã€‚</p>
                            <div class="chart-container">
                                <canvas id="velocityChart"></canvas>
                            </div>
                            <div class="text-center mt-4">
                                <button id="addSprintButton" class="bg-teal-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-teal-700 transition-colors">å®Œæˆä¸€ä¸ªæ–°è¿­ä»£</button>
                            </div>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-slate-700 mb-4 text-center">æ‰‘å…‹ç‰Œä¼°ç®— (Planning Poker) æ¨¡æ‹Ÿ</h3>
                            <p class="text-sm text-slate-500 mb-4 text-center">å›¢é˜Ÿæˆå‘˜å¯¹ä¸€ä¸ªç”¨æˆ·æ•…äº‹åŒ¿åä¼°ç®—ï¼Œç„¶åè®¨è®ºå·®å¼‚ä»¥è¾¾æˆå…±è¯†ã€‚</p>
                            <div class="bg-slate-50 p-4 rounded-lg text-center">
                                <p class="font-semibold">ç”¨æˆ·æ•…äº‹ï¼š</p>
                                <p id="poker-story" class="text-slate-800 mb-4">â€œä½œä¸ºä¸€åç”¨æˆ·ï¼Œæˆ‘å¸Œæœ›èƒ½ç”¨é‚®ç®±å’Œå¯†ç æ³¨å†Œè´¦å·ã€‚â€</p>
                                <p class="font-semibold mb-2">è¯·é€‰æ‹©ä½ è®¤ä¸ºçš„æ•…äº‹ç‚¹ï¼š</p>
                                <div class="flex justify-center flex-wrap gap-2">
                                    <button class="poker-card w-12 h-16 bg-white rounded-lg shadow font-bold text-xl border-2 border-slate-200" data-value="1">1</button>
                                    <button class="poker-card w-12 h-16 bg-white rounded-lg shadow font-bold text-xl border-2 border-slate-200" data-value="2">2</button>
                                    <button class="poker-card w-12 h-16 bg-white rounded-lg shadow font-bold text-xl border-2 border-slate-200" data-value="3">3</button>
                                    <button class="poker-card w-12 h-16 bg-white rounded-lg shadow font-bold text-xl border-2 border-slate-200" data-value="5">5</button>
                                    <button class="poker-card w-12 h-16 bg-white rounded-lg shadow font-bold text-xl border-2 border-slate-200" data-value="8">8</button>
                                </div>
                                <div id="poker-result" class="mt-4 text-slate-600 h-12"></div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-teal-50 p-6 md:p-8 rounded-xl shadow-sm mt-8">
                        <h2 class="text-2xl font-bold text-teal-700 mb-4">âœ¨ æ™ºèƒ½ç”¨æˆ·æ•…äº‹ç”Ÿæˆå™¨</h2>
                        <p class="mb-4 text-slate-600">è¾“å…¥ä¸€ä¸ªé«˜å±‚æ¬¡çš„äº§å“æ„¿æ™¯ï¼Œè®©AIä¸ºä½ ç”Ÿæˆå¯æ‰§è¡Œçš„ç”¨æˆ·æ•…äº‹å’Œæ•…äº‹ç‚¹ä¼°ç®—ï¼Œå¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å¦‚ä½•å°†æƒ³æ³•è½¬åŒ–ä¸ºæ•æ·å¾…åŠäº‹é¡¹ã€‚</p>
                        <textarea id="vision-input" class="w-full h-24 p-3 rounded-lg border border-slate-300 focus:outline-none focus:ring-2 focus:ring-teal-500 mb-4" placeholder="ä¾‹å¦‚ï¼šåˆ›å»ºä¸€ä¸ªæ ¡å›­äºŒæ‰‹ç‰©å“äº¤æ˜“Appï¼Œè®©å­¦ç”Ÿå¯ä»¥æ–¹ä¾¿åœ°ä¹°å–é—²ç½®ç‰©å“ã€‚"></textarea>
                        <button id="generate-stories-btn" class="w-full bg-teal-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-teal-700 transition-colors flex items-center justify-center">
                            <span id="generate-text">ç”Ÿæˆç”¨æˆ·æ•…äº‹ âœ¨</span>
                            <span id="generate-spinner" class="hidden animate-spin h-5 w-5 border-4 border-white border-t-transparent rounded-full ml-2"></span>
                        </button>
                        <div id="generated-stories-output" class="bg-white p-4 mt-6 rounded-lg border border-slate-200 space-y-4">
                            <p id="output-placeholder" class="text-slate-400 italic text-center">ç”Ÿæˆçš„ç”¨æˆ·æ•…äº‹å°†åœ¨æ­¤å¤„æ˜¾ç¤º...</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="pmbok" class="content-section">
                 <div class="bg-white p-6 md:p-8 rounded-xl shadow-sm">
                    <h2 class="text-2xl font-bold text-teal-600 mb-2">å…³è” PMBOK çŸ¥è¯†é¢†åŸŸ</h2>
                    <p class="mb-6 text-slate-600">æ•æ·è§„åˆ’å¹¶éç©ºä¸­æ¥¼é˜ï¼Œå®ƒä¸ PMBOK æŒ‡å—ä¸­çš„æ ¸å¿ƒç»©æ•ˆåŸŸç´§å¯†ç›¸è¿ï¼Œä½“ç°äº†åœ¨ç°ä»£é¡¹ç›®ç®¡ç†ä¸­è§„åˆ’ã€äº¤ä»˜å’Œä¼°ç®—çš„æ¼”è¿›ã€‚</p>
                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <div class="bg-slate-50 p-6 rounded-lg hover:shadow-md transition-shadow">
                            <h3 class="font-bold text-lg text-slate-800 mb-2">è§„åˆ’ç»©æ•ˆåŸŸ</h3>
                            <p class="text-slate-600">æ•æ·è·¯çº¿å›¾å’Œå‘å¸ƒè®¡åˆ’æ˜¯â€œè§„åˆ’â€çš„å…·ä½“ä½“ç°ã€‚PMBOK å¼ºè°ƒè§„åˆ’æ˜¯ä¸€ä¸ªæ¸è¿›æ˜ç»†å’Œè¿­ä»£çš„è¿‡ç¨‹ï¼Œè¿™ä¸æ•æ·è§„åˆ’ç†å¿µé«˜åº¦ä¸€è‡´ã€‚</p>
                        </div>
                        <div class="bg-slate-50 p-6 rounded-lg hover:shadow-md transition-shadow">
                            <h3 class="font-bold text-lg text-slate-800 mb-2">å¼€å‘æ–¹æ³•å’Œç”Ÿå‘½å‘¨æœŸç»©æ•ˆåŸŸ</h3>
                            <p class="text-slate-600">â€œäº¤ä»˜èŠ‚å¥â€æ˜¯è¯¥ç»©æ•ˆåŸŸå…³æ³¨çš„é‡ç‚¹ã€‚æ•æ·è·¯çº¿å›¾å’Œå‘å¸ƒè®¡åˆ’æ­£æ˜¯å®šä¹‰äº†äº§å“çš„äº¤ä»˜èŠ‚å¥å’Œè¿­ä»£å‘¨æœŸã€‚</p>
                        </div>
                        <div class="bg-slate-50 p-6 rounded-lg hover:shadow-md transition-shadow">
                            <h3 class="font-bold text-lg text-slate-800 mb-2">ä¼°ç®—æ–¹æ³• (å·¥å…·ä¸æŠ€æœ¯)</h3>
                            <p class="text-slate-600">PMBOK ä¸­æœ‰å¤šç§ä¼°ç®—æŠ€æœ¯ï¼Œæ•æ·ä¸­çš„æ•…äº‹ç‚¹ä¼°ç®—å±äºå…¶ä¸­ä¸€ç§ç›¸å¯¹ä¼°ç®—æ–¹æ³•ï¼Œå…¶ç›®çš„æ˜¯ä¸ºäº†æ›´å¥½åœ°è§„åˆ’å’Œç®¡ç†é¢„æœŸã€‚</p>
                        </div>
                    </div>
                    <div class="bg-teal-50 p-6 md:p-8 rounded-xl shadow-sm mt-8">
                        <h2 class="text-2xl font-bold text-teal-700 mb-4">âœ¨ è§„åˆ’å…³è”è§£é‡Šå™¨</h2>
                        <p class="mb-4 text-slate-600">ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ï¼Œè·å–å…³äºæ•æ·è§„åˆ’ä¸PMBOKçŸ¥è¯†é¢†åŸŸä¹‹é—´å…³ç³»çš„è¯¦ç»†è§£é‡Šã€‚</p>
                        <button id="explain-pmbok-btn" class="w-full bg-teal-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-teal-700 transition-colors flex items-center justify-center">
                            <span id="explain-pmbok-text">è§£é‡Šå…³è” âœ¨</span>
                            <span id="explain-pmbok-spinner" class="hidden animate-spin h-5 w-5 border-4 border-white border-t-transparent rounded-full ml-2"></span>
                        </button>
                        <div id="pmbok-explanation-output" class="bg-white p-4 mt-6 rounded-lg border border-slate-200 space-y-4">
                            <p id="pmbok-output-placeholder" class="text-slate-400 italic text-center">ç‚¹å‡»æŒ‰é’®ç”Ÿæˆè§£é‡Š...</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const navButtons = document.querySelectorAll('.nav-button');
            const contentSections = document.querySelectorAll('.content-section');

            navButtons.forEach(button => {
                button.addEventListener('click', () => {
                    navButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');

                    contentSections.forEach(section => section.classList.remove('active'));
                    document.getElementById(button.dataset.target).classList.add('active');
                });
            });

            const diagramData = {
                vision: {
                    title: 'æ„¿æ™¯ (Vision)',
                    content: '<p>è·¯çº¿å›¾çš„æ ¹æœ¬é©±åŠ¨åŠ›ï¼Œæ˜¯äº§å“çš„æœ€ç»ˆç›®æ ‡å’Œå­˜åœ¨ç†ç”±ã€‚</p><ul class="list-disc list-inside mt-2"><li>å›ç­”â€œæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦åšè¿™ä¸ªäº§å“ï¼Ÿâ€</li><li>æ˜¯æ‰€æœ‰å†³ç­–çš„æœ€ç»ˆæ ‡å°º</li></ul>'
                },
                roadmap: {
                    title: 'äº§å“è·¯çº¿å›¾ (Product Roadmap)',
                    content: '<p>æ²Ÿé€šäº§å“æœªæ¥å‘å±•æ–¹å‘çš„æˆ˜ç•¥æ€§æ–‡æ¡£ã€‚</p><ul class="list-disc list-inside mt-2"><li><strong>æ„æˆ:</strong> ä¸»é¢˜/ç›®æ ‡, æ—¶é—´æ¡†æ¶, å…³é”®æˆæœ</li><li><strong>ç‰¹ç‚¹:</strong> æˆ˜ç•¥æ€§, é«˜å±‚æ¬¡, çµæ´», æŒç»­æ›´æ–°</li><li><strong>ä¸åŒ…å«:</strong> å…·ä½“çš„ç”¨æˆ·æ•…äº‹ã€ä»»åŠ¡ç»†èŠ‚</li></ul>'
                },
                release: {
                    title: 'å‘å¸ƒè®¡åˆ’ (Release Plan)',
                    content: '<p>æ›´å…·ä½“åœ°è¯´æ˜åœ¨ç‰¹å®šå‘å¸ƒç‰ˆæœ¬ä¸­è¦äº¤ä»˜å“ªäº›åŠŸèƒ½ã€‚</p><ul class="list-disc list-inside mt-2"><li><strong>æ„æˆ:</strong> å‘å¸ƒç›®æ ‡, å‘å¸ƒèŒƒå›´, å‘å¸ƒæ—¥æœŸ, ä¾èµ–ä¸é£é™©</li><li><strong>ç‰¹ç‚¹:</strong> æˆ˜æœ¯æ€§, æ›´å…·ä½“, æŒ‡å¯¼çŸ­æœŸäº¤ä»˜</li></ul>'
                }
            };

            const diagramItems = document.querySelectorAll('.diagram-item');
            const detailsTitle = document.getElementById('details-title');
            const detailsContent = document.getElementById('details-content');

            diagramItems.forEach(item => {
                item.addEventListener('click', () => {
                    diagramItems.forEach(i => i.classList.remove('selected'));
                    item.classList.add('selected');
                    
                    const key = item.id.split('-')[1];
                    detailsTitle.textContent = diagramData[key].title;
                    detailsContent.innerHTML = diagramData[key].content;
                });
            });
            
            document.getElementById('diagram-roadmap').click();

            let velocityChart;
            const initialData = {
                labels: ['è¿­ä»£ 1', 'è¿­ä»£ 2', 'è¿­ä»£ 3', 'è¿­ä»£ 4'],
                points: [18, 22, 20, 25]
            };

            function createOrUpdateChart() {
                const ctx = document.getElementById('velocityChart').getContext('2d');
                if (velocityChart) {
                    velocityChart.destroy();
                }
                velocityChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: initialData.labels,
                        datasets: [{
                            label: 'å®Œæˆçš„æ•…äº‹ç‚¹',
                            data: initialData.points,
                            backgroundColor: 'rgba(13, 148, 136, 0.6)',
                            borderColor: 'rgba(13, 148, 136, 1)',
                            borderWidth: 1,
                            borderRadius: 4,
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: { display: true, text: 'æ•…äº‹ç‚¹' }
                            },
                            x: {
                                title: { display: true, text: 'è¿­ä»£å‘¨æœŸ' }
                            }
                        },
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return ` å®Œæˆ: ${context.parsed.y} æ•…äº‹ç‚¹`;
                                    }
                                }
                            }
                        }
                    }
                });
            }
            createOrUpdateChart();

            document.getElementById('addSprintButton').addEventListener('click', () => {
                const lastSprintNum = parseInt(initialData.labels[initialData.labels.length - 1].split(' ')[1]);
                initialData.labels.push(`è¿­ä»£ ${lastSprintNum + 1}`);
                const newPoints = Math.floor(Math.random() * 15) + 15;
                initialData.points.push(newPoints);
                if (initialData.labels.length > 6) {
                    initialData.labels.shift();
                    initialData.points.shift();
                }
                createOrUpdateChart();
            });

            const pokerCards = document.querySelectorAll('.poker-card');
            const pokerResult = document.getElementById('poker-result');
            pokerCards.forEach(card => {
                card.addEventListener('click', (e) => {
                    const yourVote = e.target.dataset.value;
                    pokerResult.innerHTML = `ä½ é€‰æ‹©äº† <strong>${yourVote}</strong> ç‚¹ã€‚`;
                    
                    setTimeout(() => {
                        const teamVotes = [1,2,3,5,8].sort(() => 0.5 - Math.random()).slice(0, 3);
                        if (!teamVotes.includes(parseInt(yourVote))) {
                           teamVotes[0] = parseInt(yourVote);
                           teamVotes.sort((a,b) => a-b);
                        }
                        pokerResult.innerHTML += `<br>å›¢é˜Ÿå…¶ä»–æˆå‘˜é€‰æ‹©äº†: <strong>${teamVotes.join(', ')}</strong>ã€‚`;
                        if (Math.max(...teamVotes) - Math.min(...teamVotes) > 3) {
                             pokerResult.innerHTML += `<br><span class="font-semibold text-rose-600">å·®å¼‚è¾ƒå¤§ï¼Œéœ€è¦è®¨è®ºï¼</span>`;
                        } else {
                             pokerResult.innerHTML += `<br><span class="font-semibold text-emerald-600">ä¼°ç®—åŸºæœ¬ä¸€è‡´ï¼</span>`;
                        }
                    }, 1000);
                });
            });

            const generateStoriesBtn = document.getElementById('generate-stories-btn');
            const visionInput = document.getElementById('vision-input');
            const generatedStoriesOutput = document.getElementById('generated-stories-output');
            const generateText = document.getElementById('generate-text');
            const generateSpinner = document.getElementById('generate-spinner');

            const generateReleaseBtn = document.getElementById('generate-release-btn');
            const releaseGoalInput = document.getElementById('release-goal-input');
            const generatedReleaseOutput = document.getElementById('generated-release-output');
            const generateReleaseText = document.getElementById('generate-release-text');
            const generateReleaseSpinner = document.getElementById('generate-release-spinner');

            const explainPmbokBtn = document.getElementById('explain-pmbok-btn');
            const pmbokExplanationOutput = document.getElementById('pmbok-explanation-output');
            const explainPmbokText = document.getElementById('explain-pmbok-text');
            const explainPmbokSpinner = document.getElementById('explain-pmbok-spinner');

            async function callGeminiApi(prompt, isJson = false) {
                let retries = 0;
                const maxRetries = 3;
                while (retries < maxRetries) {
                    try {
                        const chatHistory = [];
                        chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                        const payload = {
                            contents: chatHistory,
                            generationConfig: {
                                responseMimeType: isJson ? "application/json" : "text/plain",
                                responseSchema: isJson ? {
                                    type: "ARRAY",
                                    items: {
                                        type: "OBJECT",
                                        properties: {
                                            "userStory": { "type": "STRING" },
                                            "storyPoints": { "type": "NUMBER" }
                                        },
                                        "propertyOrdering": ["userStory", "storyPoints"]
                                    }
                                } : undefined
                            }
                        };
                        const apiKey = "";
                        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });
                        if (!response.ok) {
                            throw new Error(`API call failed with status: ${response.status}`);
                        }
                        const result = await response.json();
                        if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {
                            const text = result.candidates[0].content.parts[0].text;
                            return isJson ? JSON.parse(text) : text;
                        } else {
                            throw new Error("Invalid API response structure.");
                        }
                    } catch (error) {
                        console.error(`Attempt ${retries + 1} failed:`, error);
                        retries++;
                        if (retries < maxRetries) {
                            await new Promise(resolve => setTimeout(resolve, Math.pow(2, retries) * 1000));
                        }
                    }
                }
                throw new Error("Failed to generate content after multiple retries.");
            }

            generateStoriesBtn.addEventListener('click', async () => {
                const vision = visionInput.value.trim();
                if (!vision) {
                    generatedStoriesOutput.innerHTML = '<p class="text-rose-600 text-center">è¯·å…ˆè¾“å…¥ä¸€ä¸ªäº§å“æ„¿æ™¯ï¼</p>';
                    return;
                }

                generateText.classList.add('hidden');
                generateSpinner.classList.remove('hidden');
                generateStoriesBtn.disabled = true;
                generatedStoriesOutput.innerHTML = '<p class="text-slate-400 italic text-center">æ­£åœ¨ç”Ÿæˆä¸­...</p>';

                const prompt = `ä¸ºä¸€ä¸ªäº§å“æ„¿æ™¯ç”Ÿæˆ5ä¸ªç”¨æˆ·æ•…äº‹ï¼Œå¹¶ä¸ºæ¯ä¸ªæ•…äº‹ä¼°ç®—ä¸€ä¸ªæ•…äº‹ç‚¹ã€‚æ•…äº‹ç‚¹ä¼°å€¼åº”ä½¿ç”¨æ•æ·æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼ˆ1, 2, 3, 5, 8, 13, 21ï¼‰ã€‚
äº§å“æ„¿æ™¯: "${vision}"
è¯·ä»¥JSONæ•°ç»„æ ¼å¼è¿”å›ï¼Œæ¯ä¸ªå¯¹è±¡åŒ…å«"userStory"å’Œ"storyPoints"å­—æ®µã€‚`;

                try {
                    const stories = await callGeminiApi(prompt, true);
                    const storyListHtml = stories.map(story => `
                        <div class="bg-slate-50 p-4 rounded-lg flex items-center justify-between shadow-sm">
                            <p class="flex-1 text-slate-800">${story.userStory}</p>
                            <span class="ml-4 font-bold text-lg text-teal-700 bg-teal-200 px-3 py-1 rounded-full">${story.storyPoints}</span>
                        </div>
                    `).join('');
                    generatedStoriesOutput.innerHTML = storyListHtml;
                } catch (error) {
                    console.error("ç”Ÿæˆå¤±è´¥:", error);
                    generatedStoriesOutput.innerHTML = '<p class="text-rose-600 text-center">ç”Ÿæˆå¤±è´¥ï¼Œè¯·ç¨åå†è¯•ã€‚</p>';
                } finally {
                    generateText.classList.remove('hidden');
                    generateSpinner.classList.add('hidden');
                    generateStoriesBtn.disabled = false;
                }
            });

            generateReleaseBtn.addEventListener('click', async () => {
                const goal = releaseGoalInput.value.trim();
                if (!goal) {
                    generatedReleaseOutput.innerHTML = '<p class="text-rose-600 text-center">è¯·å…ˆè¾“å…¥ä¸€ä¸ªå‘å¸ƒç›®æ ‡ï¼</p>';
                    return;
                }

                generateReleaseText.classList.add('hidden');
                generateReleaseSpinner.classList.remove('hidden');
                generateReleaseBtn.disabled = true;
                generatedReleaseOutput.innerHTML = '<p class="text-slate-400 italic text-center">æ­£åœ¨ç”Ÿæˆä¸­...</p>';

                const prompt = `ä¸ºä¸€ä¸ªå‘å¸ƒç›®æ ‡ç”Ÿæˆä¸€ä¸ªå‘å¸ƒè®¡åˆ’å¤§çº²ã€‚å‘å¸ƒè®¡åˆ’åº”åŒ…å«ï¼š
1. å‘å¸ƒç›®æ ‡ï¼ˆRelease Goalï¼‰
2. å…³é”®åŠŸèƒ½ï¼ˆKey Featuresï¼‰- åˆ—è¡¨å½¢å¼
3. ä¼°ç®—æ—¶é—´æ¡†æ¶ï¼ˆEstimated Timeframeï¼‰- ä¾‹å¦‚ï¼šâ€œä¸€ä¸ªå­£åº¦â€
4. æ½œåœ¨é£é™©ï¼ˆPotential Risksï¼‰- åˆ—è¡¨å½¢å¼
å‘å¸ƒç›®æ ‡: "${goal}"
è¯·ä»¥Markdownæ ¼å¼è¿”å›ã€‚`;

                try {
                    const plan = await callGeminiApi(prompt);
                    const planHtml = plan.split('\n').map(line => {
                        if (line.startsWith('#')) return `<h3 class="font-bold text-lg">${line.substring(2)}</h3>`;
                        if (line.startsWith('##')) return `<h4 class="font-bold">${line.substring(3)}</h4>`;
                        if (line.startsWith('*')) return `<p class="ml-4">${line}</p>`;
                        return `<p>${line}</p>`;
                    }).join('');
                    generatedReleaseOutput.innerHTML = `<div class="prose max-w-none text-slate-700">${planHtml}</div>`;
                } catch (error) {
                    console.error("ç”Ÿæˆå¤±è´¥:", error);
                    generatedReleaseOutput.innerHTML = '<p class="text-rose-600 text-center">ç”Ÿæˆå¤±è´¥ï¼Œè¯·ç¨åå†è¯•ã€‚</p>';
                } finally {
                    generateReleaseText.classList.remove('hidden');
                    generateReleaseSpinner.classList.add('hidden');
                    generateReleaseBtn.disabled = false;
                }
            });

            explainPmbokBtn.addEventListener('click', async () => {
                explainPmbokText.classList.add('hidden');
                explainPmbokSpinner.classList.remove('hidden');
                explainPmbokBtn.disabled = true;
                pmbokExplanationOutput.innerHTML = '<p class="text-slate-400 italic text-center">æ­£åœ¨ç”Ÿæˆä¸­...</p>';

                const prompt = `è¯¦ç»†è§£é‡Šæ•æ·è§„åˆ’ä¸PMBOKï¼ˆé¡¹ç›®ç®¡ç†çŸ¥è¯†ä½“ç³»ï¼‰ä¸­çš„â€œè§„åˆ’ç»©æ•ˆåŸŸâ€ã€â€œå¼€å‘æ–¹æ³•å’Œç”Ÿå‘½å‘¨æœŸç»©æ•ˆåŸŸâ€ä»¥åŠâ€œä¼°ç®—æ–¹æ³•â€ä¹‹é—´çš„å…³ç³»å’Œå¼‚åŒç‚¹ï¼Œçªå‡ºæ•æ·è§„åˆ’æ˜¯å¦‚ä½•åœ¨è¿™äº›é¢†åŸŸä¸­è¿›è¡Œæ¼”è¿›å’Œå®è·µçš„ã€‚è¯·ä»¥æ˜“äºç†è§£çš„æ®µè½å½¢å¼è¿”å›ï¼Œå¹¶ä½¿ç”¨ä¸­æ–‡ã€‚`;

                try {
                    const explanation = await callGeminiApi(prompt);
                    pmbokExplanationOutput.innerHTML = `<div class="prose max-w-none text-slate-700 space-y-4">${explanation.split('\n').map(p => `<p>${p}</p>`).join('')}</div>`;
                } catch (error) {
                    console.error("ç”Ÿæˆå¤±è´¥:", error);
                    pmbokExplanationOutput.innerHTML = '<p class="text-rose-600 text-center">ç”Ÿæˆå¤±è´¥ï¼Œè¯·ç¨åå†è¯•ã€‚</p>';
                } finally {
                    explainPmbokText.classList.remove('hidden');
                    explainPmbokSpinner.classList.add('hidden');
                    explainPmbokBtn.disabled = false;
                }
            });
        });
    </script>
</body>
</html>
